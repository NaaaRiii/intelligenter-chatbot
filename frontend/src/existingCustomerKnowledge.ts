// 既存顧客向けのAI応答生成
export function generateExistingCustomerResponse(category: string, message: string): string {
  const responses: { [key: string]: { [keyword: string]: string } } = {
    'cdp': {
      'データ統合': 'データ統合の課題について承知いたしました。現在のCDPの設定を確認し、最適な統合方法をご提案させていただきます。具体的にどのようなデータソースの統合でお困りですか？',
      'セグメント': 'セグメント設定の最適化ですね。現在の設定を分析し、より効果的なセグメンテーション戦略をご提案いたします。どのようなセグメントで課題を感じていらっしゃいますか？',
      '連携': '外部ツールとの連携について承知いたしました。SalesforceやHubSpotなど、具体的にどちらのツールとの連携でお困りでしょうか？',
      'default': 'CDP運用に関するご相談ありがとうございます。詳しい状況をお聞かせいただければ、最適なソリューションをご提案させていただきます。'
    },
    'ma_crm': {
      'シナリオ': 'シナリオ設計の見直しについてですね。現在のシナリオの効果を分析し、改善案をご提案いたします。特にどの部分で効果が出ていないとお感じですか？',
      'スコアリング': 'スコアリング設定の最適化を検討されているのですね。現在の設定を確認し、より精度の高いスコアリングモデルをご提案いたします。',
      'ワークフロー': 'ワークフロー自動化の追加実装ですね。業務効率を最大化するための自動化プランをご提案させていただきます。',
      'default': 'MA/CRM最適化についてご相談ありがとうございます。現在の運用状況を詳しくお聞かせください。'
    },
    'advertising': {
      'CPA': 'CPAの改善は重要な課題ですね。現在の広告設定を分析し、コスト効率を改善する施策をご提案いたします。現在のCPAはどの程度でしょうか？',
      'クリエイティブ': 'クリエイティブの最適化について承知いたしました。A/Bテストの実施や、より効果的なクリエイティブ戦略をご提案させていただきます。',
      '予算': '広告予算の再配分についてですね。各媒体のパフォーマンスを分析し、最適な予算配分をご提案いたします。',
      'default': 'Web広告運用の最適化についてご相談ありがとうございます。現在の課題を詳しくお聞かせください。'
    },
    'analytics': {
      'ダッシュボード': 'ダッシュボードのカスタマイズについて承知いたしました。より見やすく、意思決定に役立つダッシュボードをご提案いたします。',
      'レポート': 'レポート機能の改善ですね。必要な指標や分析軸をお聞きして、最適なレポート設計をご提案いたします。',
      'ROI': 'ROI計算ロジックの見直しについて承知いたしました。より正確な効果測定ができるよう、計算方法を最適化いたします。',
      'default': 'データ分析に関するご相談ありがとうございます。どのような分析でお困りでしょうか？'
    },
    'development': {
      'API': 'API連携の追加開発について承知いたしました。連携したいシステムや必要な機能について詳しくお聞かせください。',
      '機能追加': '新機能の追加開発ですね。ご要望の機能について詳しくお聞きして、最適な実装方法をご提案いたします。',
      'パフォーマンス': 'システムパフォーマンスの改善について承知いたしました。現在の課題を分析し、最適化プランをご提案いたします。',
      'default': 'システム開発に関するご相談ありがとうございます。どのような開発をご希望でしょうか？'
    },
    'ecommerce': {
      'Shopify': 'Shopify Plusの機能活用について承知いたしました。より効果的な活用方法をご提案させていただきます。',
      'レコメンド': 'レコメンドエンジンの精度向上ですね。AIを活用した、より精度の高いレコメンデーション機能をご提案いたします。',
      '決済': '決済システムの追加・変更について承知いたしました。お客様のニーズに合った決済オプションをご提案いたします。',
      'default': 'ECサイト運営に関するご相談ありがとうございます。どの部分を強化されたいでしょうか？'
    },
    'ai_ml': {
      '予測': '予測モデルの改善について承知いたしました。より精度の高い予測アルゴリズムをご提案させていただきます。',
      'チャットボット': 'チャットボットの回答精度向上ですね。学習データの最適化や、新しいAIモデルの導入をご提案いたします。',
      'パーソナライゼーション': 'パーソナライゼーション機能の強化について承知いたしました。より効果的な個別化戦略をご提案いたします。',
      'default': 'AI・機械学習の活用についてご相談ありがとうございます。どのような機能をお求めでしょうか？'
    },
    'organization': {
      '研修': 'チームの研修についてですね。カスタマイズされた研修プログラムをご提案させていただきます。',
      'KPI': 'KPI設定の見直しについて承知いたしました。より効果的な目標管理体系をご提案いたします。',
      '連携': '部門間連携の強化ですね。組織全体の効率を高める連携方法をご提案させていただきます。',
      'default': '組織・体制に関するご相談ありがとうございます。どのような課題がございますか？'
    },
    'cost': {
      '運用費': '運用費の見直しについて承知いたしました。コスト削減と効果のバランスを考慮した最適化プランをご提案いたします。',
      '契約': '契約プランの変更についてですね。お客様のニーズに最適なプランをご提案させていただきます。',
      '統合': '他社ツール統合によるコスト削減について承知いたしました。効率的な統合プランをご提案いたします。',
      'default': 'コスト最適化についてご相談ありがとうございます。どのような最適化をお考えでしょうか？'
    },
    'competition': {
      '競合': '競合対策について承知いたしました。市場分析を基に、差別化戦略をご提案させていただきます。',
      'ブランディング': 'ブランディング強化施策ですね。効果的なブランド戦略をご提案いたします。',
      '市場': '新市場への参入戦略について承知いたしました。市場分析とともに、最適な参入戦略をご提案いたします。',
      'default': '競合対策についてご相談ありがとうございます。どのような対策をお考えでしょうか？'
    }
  };

  const categoryResponses = responses[category] || {};
  
  // メッセージ内のキーワードを検索
  for (const [keyword, response] of Object.entries(categoryResponses)) {
    if (keyword !== 'default' && message.includes(keyword)) {
      return response;
    }
  }
  
  // デフォルトレスポンス
  return categoryResponses['default'] || '詳しい内容をお聞かせください。専門チームが最適なソリューションをご提案させていただきます。';
}